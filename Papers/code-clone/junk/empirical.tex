\secput{empirical}{Empirical results}

%\figputdata{heat2dnpzp}{2D Heat nonperiodic}


\subsecput{empResults}{Some empirical results about the portability and scalability of Pochoir package}

We have tested several typical stencils written in our Pochoir
language, and compiled them with Intel C++ version $12.0.0$ compiler 
on different platforms, including a 12-core Intel Core i7 (Nehalem) machine
with a private $64$ KB L1-cache, a private $256$ KB L2-cache, and a 
shared $12$ MB L3-cache, a 16-core Intel Xeon (Tigerton) machine, with a shared
$4$ MB L2-cache. \figref{benchmarks} is the data on Nehalem machine, \figref{results:cagnode17}
is the data on Tigerton machine.

\begin{figure*}
\center\small
\begin{tabular}{|m{7cm}|c|c|c|c|c|}
\hline
\multirow{2}{*}{\textit{Benchmark}} &  \textit{Pochoir}  & \textit{Pochoir}    & \multirow{2}{*}{\textit{Speedup}} & \textit{Loops}      & \textit{Loops/Pochoir} \\
                                    &  \textit{$1$ core} & \textit{$12$ cores} &                                   & \textit{$12$ cores} & \textit{$12$ cores}    \\
                                    &  \textit{(secs)}   & \textit{(secs)}     &                                   & \textit{(secs)}     &                        \\\hline
%2D heat equation, nonperiodic, zero-padded: $16000^2$ spatial grid, 500 time steps      & 360 & 31 & 11.99 & & \\\hline
2D heat equation, nonperiodic, not zero-padded: $16000^2$ spatial grid, 500 time steps  & 800 & 51 & 15.68 & 380 & 7.45 \\\hline
2D heat equation, periodic: $16000^2$ spatial grid, 500 time steps                      & 800 & 51 & 15.68 & 317 & 6.21 \\\hline
Game of Life: $16000^2$ spatial grid, 500 time steps                                    & 1047 & 65 & 16.10 & 364 & 5.6 \\\hline
3DFD: $500^3$ spatial grid, 500 time steps                                             & 649 & 106 & 6.12 & 296 & 2.79 \\\hline
LBM: $100 \times 100 \times 130$ spatial grid, 3000 time steps                         & 1173 & 172 & 6.81 & 475 & 2.76 \\\hline
RNA: sequence length = 300                                                              & 213 & 51 & 4.17 & 95 & 1.86 \\\hline
PSA: sequence lengths = $\ang{100000, 100000}$                                          & 160 & 21 & 7.61 & 133 & 6.33 \\\hline
Longest common subsequence: sequence lengths = $\ang{100000, 100000}$ 	                & 77 & 12 & 6.41 & 80 & 6.33 \\\hline
Game of Life on a Klein bottle: $16000^2$ spatial grid, 500 time steps                  & 1143 & 72 & 15.84 & 327 & 4.54 \\\hline
Heat Diffusion on a Klein bottle: $16000^2$ spatial grid, 1000 time steps               & 1611 & 104 & 15.49 & 757 &  7.27 \\\hline
4D heat equation, nonperiodic, zero-padded: $150^4$ spatial grid, 100 time steps        & 395 & 107 & 3.69 & 203 & 1.89 \\\hline
APOP, nonperiodic, zero-padded: time to mature (in years) = 2.00        & 372 & 23 & 16.17 & 119 & 5.17 \\
, $2e6$ spatial grid, 10000 time steps & & & & & \\\hline

\end{tabular}
\caption{Stencil benchmarks on Tigerton.  All times are in seconds. \id{Loops} means a \func{parallel\_for} loop implementation. And for all non-periodic stencils, we integrated zero-padding optimization in \id{Loop} version, while for Pochoir generated code, we don't. }
\label{fig:results:cagnode17}
\end{figure*}
%\figputdata{heat2dnpzp}{2D Heat nonperiodic}



